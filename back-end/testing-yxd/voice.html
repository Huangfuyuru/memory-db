<!DOCTYPE html>
<html lang="en">

    <head>
      <title>THU Audio</title>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/css/materialize.min.css" />
      <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet" />
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
     
      <script  src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script  src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/js/materialize.min.js"></script>
     
    </head>
     
   <body>
    <div class="waves-effect waves-light btn" id="browse-container">
      <span>Browse files</span>
      <input type="file" id="browse-button" accept="audio/*">
    </div>
    <div>
      <span>source audio</span>
      <audio id="img-card"  controls></audio><br>
    </div>
   </body>
</html>

<script>
 loadAudio = function(file) {
  var reader = new FileReader();
  reader.onload = function(event) {
    $('#img-card').attr('src', event.target.result);
  };
  reader.readAsDataURL(file);
};

  $("#browse-button").change(function() {
    console.log($("#browse-button").prop("files")[0])
      // loadAudio($("#browse-button").prop("files")[0]);
      var formData = new FormData();

      formData.append('uploadfile',$("#browse-button").prop("files")[0])
      console.log(formData)
      var url ='http://localhost:3001/sound';
      fetch(url,{
        method:'POST',
        headers: {'Content-Type': 'multipart/form-data'},
        body:formData
      }).then(res=>res.json())
      .then(res=>{
        console.log(res)
      })
    });
</script>